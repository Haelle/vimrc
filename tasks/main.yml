---
- name: Install Vim
  package:
    name: vim
    state: present

- name: Clone & install amix/vimrc
  include: install_vim.yml

- name: Install plugins
  git:
    repo: '{{ item.url }}'
    dest: '{{ vim_dir }}/my_plugins/{{ item.name }}'
  with_items:
    - url: https://github.com/tpope/vim-rails.git
      name: vim-rails
    - url: https://github.com/vim-ruby/vim-ruby.git
      name: vim-ruby
    - url: https://github.com/hwartig/vim-seeing-is-believing.git
      name: vim-seeing-is-believing
    - url: https://github.com/thoughtbot/vim-rspec.git
      name: vim-rspec
    - url: https://github.com/tpope/vim-endwise.git
      name: vim-endwise
    - url: https://github.com/pearofducks/ansible-vim.git
      name: ansible-vim
    - url: https://github.com/mhinz/vim-signify.git
      name: vim-signify
    - url: https://github.com/AndrewRadev/splitjoin.vim.git
      name: splitjoin.vim
    - url: https://github.com/posva/vim-vue
      name: vim-vue
    - url: https://github.com/leafOfTree/vim-vue-plugin
      name: vim-vue-plugin

- name: Copy my config
  copy:
    src: my_configs.vim
    dest: '{{ vim_dir }}/my_configs.vim'

- name: Remove amix/vimrc plugins
  include: remove_plugins.yml
